import {
  require_react_dom
} from "./chunk-ORYFNTKN.js";
import {
  require_react
} from "./chunk-E434T6SK.js";
import {
  __toESM
} from "./chunk-EWTE5DHJ.js";

// node_modules/react-photo-view/dist/react-photo-view.module.js
var import_react = __toESM(require_react());
var import_react_dom = __toESM(require_react_dom());
function h() {
  return h = Object.assign ? Object.assign.bind() : function(e2) {
    for (var n2 = 1; n2 < arguments.length; n2++) {
      var t2 = arguments[n2];
      for (var r2 in t2) ({}).hasOwnProperty.call(t2, r2) && (e2[r2] = t2[r2]);
    }
    return e2;
  }, h.apply(null, arguments);
}
function m(e2, n2) {
  if (null == e2) return {};
  var t2 = {};
  for (var r2 in e2) if ({}.hasOwnProperty.call(e2, r2)) {
    if (n2.includes(r2)) continue;
    t2[r2] = e2[r2];
  }
  return t2;
}
function g(e2) {
  var t2 = (0, import_react.useRef)({ fn: e2, curr: void 0 }).current;
  if (t2.fn = e2, !t2.curr) {
    var r2 = /* @__PURE__ */ Object.create(null);
    Object.keys(e2).forEach(function(e3) {
      r2[e3] = function() {
        var n2;
        return (n2 = t2.fn[e3]).call.apply(n2, [t2.fn].concat([].slice.call(arguments)));
      };
    }), t2.curr = r2;
  }
  return t2.curr;
}
function p(e2) {
  return (0, import_react.useReducer)(function(e3, n2) {
    return h({}, e3, "function" == typeof n2 ? n2(e3) : n2);
  }, e2);
}
var w = (0, import_react.createContext)(void 0);
var y = "cubic-bezier(0.25, 0.8, 0.25, 1)";
var x = 20;
var C = "undefined" != typeof window && "ontouchstart" in window;
var b = function(e2, n2, t2) {
  return Math.max(Math.min(e2, t2), n2);
};
var E = function(e2, n2, t2) {
  return void 0 === n2 && (n2 = 0), void 0 === t2 && (t2 = 0), b(e2, 1 * (1 - t2), Math.max(6, n2) * (1 + t2));
};
var k = "undefined" == typeof window || /ServerSideRendering/.test(navigator && navigator.userAgent) ? import_react.useEffect : import_react.useLayoutEffect;
function P(e2, t2, r2) {
  var o2 = (0, import_react.useRef)(t2);
  o2.current = t2, (0, import_react.useEffect)(function() {
    function n2(e3) {
      o2.current(e3);
    }
    return e2 && window.addEventListener(e2, n2, r2), function() {
      e2 && window.removeEventListener(e2, n2);
    };
  }, [e2]);
}
var _ = ["container"];
function M(n2) {
  var t2 = n2.container, r2 = void 0 === t2 ? document.body : t2, i2 = m(n2, _);
  return (0, import_react_dom.createPortal)(import_react.default.createElement("div", h({}, i2)), r2);
}
function Y(n2) {
  return import_react.default.createElement("svg", h({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z" }));
}
function X(n2) {
  return import_react.default.createElement("svg", h({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z" }));
}
function N(n2) {
  return import_react.default.createElement("svg", h({ width: "44", height: "44", viewBox: "0 0 768 768" }, n2), import_react.default.createElement("path", { d: "M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z" }));
}
function W() {
  return (0, import_react.useEffect)(function() {
    var e2 = document.body.style, n2 = e2.overflow;
    return e2.overflow = "hidden", function() {
      e2.overflow = n2;
    };
  }, []), null;
}
function S(e2) {
  var n2 = e2.touches[0], t2 = n2.clientX, r2 = n2.clientY;
  if (e2.touches.length >= 2) {
    var i2 = e2.touches[1], o2 = i2.clientX, a2 = i2.clientY;
    return [(t2 + o2) / 2, (r2 + a2) / 2, Math.sqrt(Math.pow(o2 - t2, 2) + Math.pow(a2 - r2, 2))];
  }
  return [t2, r2, 0];
}
var T = function(e2, n2, t2, r2) {
  var i2, o2 = t2 * n2, a2 = (o2 - r2) / 2, c2 = e2;
  return o2 <= r2 ? (i2 = 1, c2 = 0) : e2 > 0 && a2 - e2 <= 0 ? (i2 = 2, c2 = a2) : e2 < 0 && a2 + e2 <= 0 && (i2 = 3, c2 = -a2), [i2, c2];
};
function V(e2, n2, t2, r2, i2, o2, a2, c2, u2, l2) {
  void 0 === a2 && (a2 = innerWidth / 2), void 0 === c2 && (c2 = innerHeight / 2), void 0 === u2 && (u2 = 0), void 0 === l2 && (l2 = 0);
  var s2 = T(e2, o2, t2, innerWidth)[0], d2 = T(n2, o2, r2, innerHeight), v2 = innerWidth / 2, f2 = innerHeight / 2;
  return { x: a2 - o2 / i2 * (a2 - (v2 + e2)) - v2 + (r2 / t2 >= 3 && t2 * o2 === innerWidth ? 0 : s2 ? u2 / 2 : u2), y: c2 - o2 / i2 * (c2 - (f2 + n2)) - f2 + (d2[0] ? l2 / 2 : l2), lastCX: a2, lastCY: c2 };
}
function R(e2, n2, t2) {
  var r2 = e2 % 180 != 0;
  return r2 ? [t2, n2, r2] : [n2, t2, r2];
}
function A(e2, n2, t2) {
  var r2 = R(t2, innerWidth, innerHeight), i2 = r2[0], o2 = r2[1], a2 = 0, c2 = i2, u2 = o2, l2 = e2 / n2 * o2, s2 = n2 / e2 * i2;
  return e2 < i2 && n2 < o2 ? (c2 = e2, u2 = n2) : e2 < i2 && n2 >= o2 ? c2 = l2 : e2 >= i2 && n2 < o2 || e2 / n2 > i2 / o2 ? u2 = s2 : n2 / e2 >= 3 && !r2[2] ? a2 = ((u2 = s2) - o2) / 2 : c2 = l2, { width: c2, height: u2, x: 0, y: a2, pause: true };
}
function I(e2, t2) {
  var r2 = t2.leading, i2 = void 0 !== r2 && r2, o2 = t2.maxWait, a2 = t2.wait, u2 = void 0 === a2 ? o2 || 0 : a2, l2 = (0, import_react.useRef)(e2);
  l2.current = e2;
  var s2 = (0, import_react.useRef)(0), d2 = (0, import_react.useRef)(), v2 = function() {
    return d2.current && clearTimeout(d2.current);
  }, f2 = (0, import_react.useCallback)(function() {
    var e3 = [].slice.call(arguments), n2 = Date.now();
    function t3() {
      s2.current = n2, v2(), l2.current.apply(null, e3);
    }
    var r3 = s2.current, a3 = n2 - r3;
    if (0 === r3 && (i2 && t3(), s2.current = n2), void 0 !== o2) {
      if (a3 > o2) return void t3();
    } else a3 < u2 && (s2.current = n2);
    v2(), d2.current = setTimeout(function() {
      t3(), s2.current = 0;
    }, u2);
  }, [u2, o2, i2]);
  return f2.cancel = v2, f2;
}
var H = function(e2, n2, t2) {
  return F(e2, n2, t2, 100, function(e3) {
    return e3;
  }, function() {
    return F(n2, e2, t2);
  });
};
var L = function(e2) {
  return 1 - Math.pow(1 - e2, 4);
};
function F(e2, n2, t2, r2, i2, o2) {
  void 0 === r2 && (r2 = 400), void 0 === i2 && (i2 = L);
  var a2 = n2 - e2;
  if (0 !== a2) {
    var c2 = Date.now(), u2 = 0, l2 = function() {
      var n3 = Math.min(1, (Date.now() - c2) / r2);
      t2(e2 + i2(n3) * a2) && n3 < 1 ? s2() : (cancelAnimationFrame(u2), n3 >= 1 && o2 && o2());
    };
    s2();
  }
  function s2() {
    u2 = requestAnimationFrame(l2);
  }
}
var D = { T: 0, L: 0, W: 0, H: 0, FIT: void 0 };
var B = function() {
  var e2 = (0, import_react.useRef)(false);
  return (0, import_react.useEffect)(function() {
    return e2.current = true, function() {
      e2.current = false;
    };
  }, []), e2;
};
var O = ["className"];
function z(n2) {
  var t2 = n2.className, r2 = void 0 === t2 ? "" : t2, i2 = m(n2, O);
  return import_react.default.createElement("div", h({ className: "PhotoView__Spinner " + r2 }, i2), import_react.default.createElement("svg", { viewBox: "0 0 32 32", width: "36", height: "36", fill: "white" }, import_react.default.createElement("path", { opacity: ".25", d: "M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4" }), import_react.default.createElement("path", { d: "M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z" })));
}
var j = ["src", "loaded", "broken", "className", "onPhotoLoad", "loadingElement", "brokenElement"];
function q(n2) {
  var t2 = n2.src, r2 = n2.loaded, i2 = n2.broken, o2 = n2.className, a2 = n2.onPhotoLoad, c2 = n2.loadingElement, u2 = n2.brokenElement, l2 = m(n2, j), s2 = B();
  return t2 && !i2 ? import_react.default.createElement(import_react.default.Fragment, null, import_react.default.createElement("img", h({ className: "PhotoView__Photo" + (o2 ? " " + o2 : ""), src: t2, onLoad: function(e2) {
    var n3 = e2.target;
    s2.current && a2({ loaded: true, naturalWidth: n3.naturalWidth, naturalHeight: n3.naturalHeight });
  }, onError: function() {
    s2.current && a2({ broken: true });
  }, draggable: false, alt: "" }, l2)), !r2 && (c2 ? import_react.default.createElement("span", { className: "PhotoView__icon" }, c2) : import_react.default.createElement(z, { className: "PhotoView__icon" }))) : u2 ? import_react.default.createElement("span", { className: "PhotoView__icon" }, "function" == typeof u2 ? u2({ src: t2 }) : u2) : null;
}
var K = { naturalWidth: void 0, naturalHeight: void 0, width: void 0, height: void 0, loaded: void 0, broken: false, x: 0, y: 0, touched: false, maskTouched: false, rotate: 0, scale: 1, CX: 0, CY: 0, lastX: 0, lastY: 0, lastCX: 0, lastCY: 0, lastScale: 1, touchTime: 0, touchLength: 0, pause: true, stopRaf: true, reach: void 0 };
function U(t2) {
  var r2 = t2.item, o2 = r2.src, a2 = r2.render, c2 = r2.width, l2 = void 0 === c2 ? 0 : c2, s2 = r2.height, d2 = void 0 === s2 ? 0 : s2, v2 = r2.originRef, f2 = t2.visible, m2 = t2.speed, w2 = t2.easing, y2 = t2.wrapClassName, x2 = t2.className, b2 = t2.style, _2 = t2.loadingElement, M2 = t2.brokenElement, Y2 = t2.onPhotoTap, X2 = t2.onMaskTap, N2 = t2.onReachMove, W2 = t2.onReachUp, L2 = t2.onPhotoResize, O2 = t2.isActive, z2 = t2.expose, j2 = p(K), U2 = j2[0], G2 = j2[1], J2 = (0, import_react.useRef)(0), Q2 = B(), Z2 = U2.naturalWidth, $2 = void 0 === Z2 ? l2 : Z2, ee2 = U2.naturalHeight, ne = void 0 === ee2 ? d2 : ee2, te = U2.width, re = void 0 === te ? l2 : te, ie = U2.height, oe = void 0 === ie ? d2 : ie, ae = U2.loaded, ce = void 0 === ae ? !o2 : ae, ue = U2.broken, le = U2.x, se = U2.y, de = U2.touched, ve = U2.stopRaf, fe = U2.maskTouched, he = U2.rotate, me = U2.scale, ge = U2.CX, pe = U2.CY, we = U2.lastX, ye = U2.lastY, xe = U2.lastCX, Ce = U2.lastCY, be = U2.lastScale, Ee = U2.touchTime, ke = U2.touchLength, Pe = U2.pause, _e = U2.reach, Me = g({ onScale: function(e2) {
    return Ye(E(e2));
  }, onRotate: function(e2) {
    he !== e2 && (z2({ rotate: e2 }), G2(h({ rotate: e2 }, A($2, ne, e2))));
  } });
  function Ye(e2, n2, t3) {
    me !== e2 && (z2({ scale: e2 }), G2(h({ scale: e2 }, V(le, se, re, oe, me, e2, n2, t3), e2 <= 1 && { x: 0, y: 0 })));
  }
  var Xe = I(function(e2, n2, t3) {
    if (void 0 === t3 && (t3 = 0), (de || fe) && O2) {
      var r3 = R(he, re, oe), i2 = r3[0], o3 = r3[1];
      if (0 === t3 && 0 === J2.current) {
        var a3 = Math.abs(e2 - ge) <= 20, c3 = Math.abs(n2 - pe) <= 20;
        if (a3 && c3) return void G2({ lastCX: e2, lastCY: n2 });
        J2.current = a3 ? n2 > pe ? 3 : 2 : 1;
      }
      var u2, l3 = e2 - xe, s3 = n2 - Ce;
      if (0 === t3) {
        var d3 = T(l3 + we, me, i2, innerWidth)[0], v3 = T(s3 + ye, me, o3, innerHeight);
        u2 = function(e3, n3, t4, r4) {
          return n3 && 1 === e3 || "x" === r4 ? "x" : t4 && e3 > 1 || "y" === r4 ? "y" : void 0;
        }(J2.current, d3, v3[0], _e), void 0 !== u2 && N2(u2, e2, n2, me);
      }
      if ("x" === u2 || fe) return void G2({ reach: "x" });
      var f3 = E(me + (t3 - ke) / 100 / 2 * me, $2 / re, 0.2);
      z2({ scale: f3 }), G2(h({ touchLength: t3, reach: u2, scale: f3 }, V(le, se, re, oe, me, f3, e2, n2, l3, s3)));
    }
  }, { maxWait: 8 });
  function Ne(e2) {
    return !ve && !de && (Q2.current && G2(h({}, e2, { pause: f2 })), Q2.current);
  }
  var We, Se, Te, Ve, Re, Ae, Ie, He, Le = (Re = function(e2) {
    return Ne({ x: e2 });
  }, Ae = function(e2) {
    return Ne({ y: e2 });
  }, Ie = function(e2) {
    return Q2.current && (z2({ scale: e2 }), G2({ scale: e2 })), !de && Q2.current;
  }, He = g({ X: function(e2) {
    return Re(e2);
  }, Y: function(e2) {
    return Ae(e2);
  }, S: function(e2) {
    return Ie(e2);
  } }), function(e2, n2, t3, r3, i2, o3, a3, c3, u2, l3, s3) {
    var d3 = R(l3, i2, o3), v3 = d3[0], f3 = d3[1], h2 = T(e2, c3, v3, innerWidth), m3 = h2[0], g2 = h2[1], p2 = T(n2, c3, f3, innerHeight), w3 = p2[0], y3 = p2[1], x3 = Date.now() - s3;
    if (x3 >= 200 || c3 !== a3 || Math.abs(u2 - a3) > 1) {
      var C2 = V(e2, n2, i2, o3, a3, c3), b3 = C2.x, E2 = C2.y, k2 = m3 ? g2 : b3 !== e2 ? b3 : null, P2 = w3 ? y3 : E2 !== n2 ? E2 : null;
      return null !== k2 && F(e2, k2, He.X), null !== P2 && F(n2, P2, He.Y), void (c3 !== a3 && F(a3, c3, He.S));
    }
    var _3 = (e2 - t3) / x3, M3 = (n2 - r3) / x3, Y3 = Math.sqrt(Math.pow(_3, 2) + Math.pow(M3, 2)), X3 = false, N3 = false;
    !function(e3, n3) {
      var t4, r4 = e3, i3 = 0, o4 = 0, a4 = function(o5) {
        t4 || (t4 = o5);
        var a5 = o5 - t4, l4 = Math.sign(e3), s4 = -1e-3 * l4, d4 = Math.sign(-r4) * Math.pow(r4, 2) * 2e-4, v4 = r4 * a5 + (s4 + d4) * Math.pow(a5, 2) / 2;
        i3 += v4, t4 = o5, l4 * (r4 += (s4 + d4) * a5) <= 0 ? u3() : n3(i3) ? c4() : u3();
      };
      function c4() {
        o4 = requestAnimationFrame(a4);
      }
      function u3() {
        cancelAnimationFrame(o4);
      }
      c4();
    }(Y3, function(t4) {
      var r4 = e2 + t4 * (_3 / Y3), i3 = n2 + t4 * (M3 / Y3), o4 = T(r4, a3, v3, innerWidth), c4 = o4[0], u3 = o4[1], l4 = T(i3, a3, f3, innerHeight), s4 = l4[0], d4 = l4[1];
      if (c4 && !X3 && (X3 = true, m3 ? F(r4, u3, He.X) : H(u3, r4 + (r4 - u3), He.X)), s4 && !N3 && (N3 = true, w3 ? F(i3, d4, He.Y) : H(d4, i3 + (i3 - d4), He.Y)), X3 && N3) return false;
      var h3 = X3 || He.X(u3), g3 = N3 || He.Y(d4);
      return h3 && g3;
    });
  }), Fe = (We = Y2, Se = function(e2, n2) {
    _e || Ye(1 !== me ? 1 : Math.max(2, $2 / re), e2, n2);
  }, Te = (0, import_react.useRef)(0), Ve = I(function() {
    Te.current = 0, We.apply(void 0, [].slice.call(arguments));
  }, { wait: 300 }), function() {
    var e2 = [].slice.call(arguments);
    Te.current += 1, Ve.apply(void 0, e2), Te.current >= 2 && (Ve.cancel(), Te.current = 0, Se.apply(void 0, e2));
  });
  function De(e2, n2) {
    if (J2.current = 0, (de || fe) && O2) {
      G2({ touched: false, maskTouched: false, pause: false, stopRaf: false, reach: void 0 });
      var t3 = E(me, $2 / re);
      if (Le(le, se, we, ye, re, oe, me, t3, be, he, Ee), W2(e2, n2), ge === e2 && pe === n2) {
        if (de) return void Fe(e2, n2);
        fe && X2(e2, n2);
      }
    }
  }
  function Be(e2, n2, t3) {
    void 0 === t3 && (t3 = 0), G2({ touched: true, CX: e2, CY: n2, lastCX: e2, lastCY: n2, lastX: le, lastY: se, lastScale: me, touchLength: t3, touchTime: Date.now() });
  }
  function Oe(e2) {
    G2({ maskTouched: true, CX: e2.clientX, CY: e2.clientY, lastX: le, lastY: se });
  }
  P(C ? void 0 : "mousemove", function(e2) {
    e2.preventDefault(), Xe(e2.clientX, e2.clientY);
  }), P(C ? void 0 : "mouseup", function(e2) {
    De(e2.clientX, e2.clientY);
  }), P(C ? "touchmove" : void 0, function(e2) {
    e2.preventDefault();
    var n2 = S(e2);
    Xe.apply(void 0, n2);
  }, { passive: false }), P(C ? "touchend" : void 0, function(e2) {
    var n2 = e2.changedTouches[0];
    De(n2.clientX, n2.clientY);
  }, { passive: false }), P("resize", I(function() {
    ce && !de && (G2(A($2, ne, he)), L2());
  }, { maxWait: 8 })), k(function() {
    O2 && z2(h({ scale: me, rotate: he }, Me));
  }, [O2]);
  var ze = function(e2, t3, r3, o3, a3, c3, l3, s3, d3, v3) {
    var f3 = function(e3, t4, r4, i2, o4) {
      var a4 = (0, import_react.useRef)(false), c4 = p({ lead: true, scale: r4 }), u2 = c4[0], l4 = u2.lead, s4 = u2.scale, d4 = c4[1], v4 = I(function(e4) {
        try {
          return o4(true), d4({ lead: false, scale: e4 }), Promise.resolve();
        } catch (e5) {
          return Promise.reject(e5);
        }
      }, { wait: i2 });
      return k(function() {
        a4.current ? (o4(false), d4({ lead: true }), v4(r4)) : a4.current = true;
      }, [r4]), l4 ? [e3 * s4, t4 * s4, r4 / s4] : [e3 * r4, t4 * r4, 1];
    }(c3, l3, s3, d3, v3), h2 = f3[0], m3 = f3[1], w3 = f3[2], y3 = function(e3, t4, r4, o4, a4) {
      var c4 = (0, import_react.useState)(D), l4 = c4[0], s4 = c4[1], d4 = (0, import_react.useState)(0), v4 = d4[0], f4 = d4[1], h3 = (0, import_react.useRef)(), m4 = g({ OK: function() {
        return e3 && f4(4);
      } });
      function p2(e4) {
        a4(false), f4(e4);
      }
      return (0, import_react.useEffect)(function() {
        if (h3.current || (h3.current = Date.now()), r4) {
          if (function(e4, n2) {
            var t5 = e4 && e4.current;
            if (t5 && 1 === t5.nodeType) {
              var r5 = t5.getBoundingClientRect();
              n2({ T: r5.top, L: r5.left, W: r5.width, H: r5.height, FIT: "IMG" === t5.tagName ? getComputedStyle(t5).objectFit : void 0 });
            }
          }(t4, s4), e3) return Date.now() - h3.current < 250 ? (f4(1), requestAnimationFrame(function() {
            f4(2), requestAnimationFrame(function() {
              return p2(3);
            });
          }), void setTimeout(m4.OK, o4)) : void f4(4);
          p2(5);
        }
      }, [e3, r4]), [v4, l4];
    }(e2, t3, r3, d3, v3), x3 = y3[0], C2 = y3[1], b3 = C2.W, E2 = C2.FIT, P2 = innerWidth / 2, _3 = innerHeight / 2, M3 = x3 < 3 || x3 > 4;
    return [M3 ? b3 ? C2.L : P2 : o3 + (P2 - c3 * s3 / 2), M3 ? b3 ? C2.T : _3 : a3 + (_3 - l3 * s3 / 2), h2, M3 && E2 ? h2 * (C2.H / b3) : m3, 0 === x3 ? w3 : M3 ? b3 / (c3 * s3) || 0.01 : w3, M3 ? E2 ? 1 : 0 : 1, x3, E2];
  }(f2, v2, ce, le, se, re, oe, me, m2, function(e2) {
    return G2({ pause: e2 });
  }), je = ze[4], qe = ze[6], Ke = "transform " + m2 + "ms " + w2, Ue = { className: x2, onMouseDown: C ? void 0 : function(e2) {
    e2.stopPropagation(), 0 === e2.button && Be(e2.clientX, e2.clientY, 0);
  }, onTouchStart: C ? function(e2) {
    e2.stopPropagation(), Be.apply(void 0, S(e2));
  } : void 0, onWheel: function(e2) {
    if (!_e) {
      var n2 = E(me - e2.deltaY / 100 / 2, $2 / re);
      G2({ stopRaf: true }), Ye(n2, e2.clientX, e2.clientY);
    }
  }, style: { width: ze[2] + "px", height: ze[3] + "px", opacity: ze[5], objectFit: 4 === qe ? void 0 : ze[7], transform: he ? "rotate(" + he + "deg)" : void 0, transition: qe > 2 ? Ke + ", opacity " + m2 + "ms ease, height " + (qe < 4 ? m2 / 2 : qe > 4 ? m2 : 0) + "ms " + w2 : void 0 } };
  return import_react.default.createElement("div", { className: "PhotoView__PhotoWrap" + (y2 ? " " + y2 : ""), style: b2, onMouseDown: !C && O2 ? Oe : void 0, onTouchStart: C && O2 ? function(e2) {
    return Oe(e2.touches[0]);
  } : void 0 }, import_react.default.createElement("div", { className: "PhotoView__PhotoBox", style: { transform: "matrix(" + je + ", 0, 0, " + je + ", " + ze[0] + ", " + ze[1] + ")", transition: de || Pe ? void 0 : Ke, willChange: O2 ? "transform" : void 0 } }, o2 ? import_react.default.createElement(q, h({ src: o2, loaded: ce, broken: ue }, Ue, { onPhotoLoad: function(e2) {
    G2(h({}, e2, e2.loaded && A(e2.naturalWidth || 0, e2.naturalHeight || 0, he)));
  }, loadingElement: _2, brokenElement: M2 })) : a2 && a2({ attrs: Ue, scale: je, rotate: he })));
}
var G = { x: 0, touched: false, pause: false, lastCX: void 0, lastCY: void 0, bg: void 0, lastBg: void 0, overlay: true, minimal: true, scale: 1, rotate: 0 };
function J(r2) {
  var i2 = r2.loop, o2 = void 0 === i2 ? 3 : i2, c2 = r2.speed, l2 = r2.easing, s2 = r2.photoClosable, d2 = r2.maskClosable, v2 = void 0 === d2 || d2, f2 = r2.maskOpacity, h2 = void 0 === f2 ? 1 : f2, m2 = r2.pullClosable, w2 = void 0 === m2 || m2, E2 = r2.bannerVisible, _2 = void 0 === E2 || E2, S2 = r2.overlayRender, T2 = r2.toolbarRender, V2 = r2.className, R2 = r2.maskClassName, A2 = r2.photoClassName, I2 = r2.photoWrapClassName, H2 = r2.loadingElement, L2 = r2.brokenElement, F2 = r2.images, D2 = r2.index, B2 = void 0 === D2 ? 0 : D2, O2 = r2.onIndexChange, z2 = r2.visible, j2 = r2.onClose, q2 = r2.afterClose, K2 = r2.portalContainer, J2 = p(G), Q2 = J2[0], Z2 = J2[1], $2 = (0, import_react.useState)(0), ee2 = $2[0], ne = $2[1], te = Q2.x, re = Q2.touched, ie = Q2.pause, oe = Q2.lastCX, ae = Q2.lastCY, ce = Q2.bg, ue = void 0 === ce ? h2 : ce, le = Q2.lastBg, se = Q2.overlay, de = Q2.minimal, ve = Q2.scale, fe = Q2.rotate, he = Q2.onScale, me = Q2.onRotate, ge = r2.hasOwnProperty("index"), pe = ge ? B2 : ee2, we = ge ? O2 : ne, ye = (0, import_react.useRef)(pe), xe = F2.length, Ce = F2[pe], be = "boolean" == typeof o2 ? o2 : xe > o2, Ee = function(e2, r3) {
    var i3 = (0, import_react.useReducer)(function(e3) {
      return !e3;
    }, false)[1], o3 = (0, import_react.useRef)(0), c3 = function(t2) {
      var r4 = (0, import_react.useRef)(t2);
      function i4(e3) {
        r4.current = e3;
      }
      return (0, import_react.useMemo)(function() {
        !function(n2) {
          e2 ? (n2(e2), o3.current = 1) : o3.current = 2;
        }(i4);
      }, [t2]), [r4.current, i4];
    }(e2), u2 = c3[1];
    return [c3[0], o3.current, function() {
      i3(), 2 === o3.current && (u2(false), r3 && r3()), o3.current = 0;
    }];
  }(z2, q2), ke = Ee[0], Pe = Ee[1], _e = Ee[2];
  k(function() {
    if (ke) return Z2({ pause: true, x: pe * -(innerWidth + x) }), void (ye.current = pe);
    Z2(G);
  }, [ke]);
  var Me = g({ close: function(e2) {
    me && me(0), Z2({ overlay: true, lastBg: ue }), j2(e2);
  }, changeIndex: function(e2, n2) {
    void 0 === n2 && (n2 = false);
    var t2 = be ? ye.current + (e2 - pe) : e2, r3 = xe - 1, i3 = b(t2, 0, r3), o3 = be ? t2 : i3, a2 = innerWidth + x;
    Z2({ touched: false, lastCX: void 0, lastCY: void 0, x: -a2 * o3, pause: n2 }), ye.current = o3, we && we(be ? e2 < 0 ? r3 : e2 > r3 ? 0 : e2 : i3);
  } }), Ye = Me.close, Xe = Me.changeIndex;
  function Ne(e2) {
    return e2 ? Ye() : Z2({ overlay: !se });
  }
  function We() {
    Z2({ x: -(innerWidth + x) * pe, lastCX: void 0, lastCY: void 0, pause: true }), ye.current = pe;
  }
  function Se(e2, n2, t2, r3) {
    "x" === e2 ? function(e3) {
      if (void 0 !== oe) {
        var n3 = e3 - oe, t3 = n3;
        !be && (0 === pe && n3 > 0 || pe === xe - 1 && n3 < 0) && (t3 = n3 / 2), Z2({ touched: true, lastCX: oe, x: -(innerWidth + x) * ye.current + t3, pause: false });
      } else Z2({ touched: true, lastCX: e3, x: te, pause: false });
    }(n2) : "y" === e2 && function(e3, n3) {
      if (void 0 !== ae) {
        var t3 = null === h2 ? null : b(h2, 0.01, h2 - Math.abs(e3 - ae) / 100 / 4);
        Z2({ touched: true, lastCY: ae, bg: 1 === n3 ? t3 : h2, minimal: 1 === n3 });
      } else Z2({ touched: true, lastCY: e3, bg: ue, minimal: true });
    }(t2, r3);
  }
  function Te(e2, n2) {
    var t2 = e2 - (null != oe ? oe : e2), r3 = n2 - (null != ae ? ae : n2), i3 = false;
    if (t2 < -40) Xe(pe + 1);
    else if (t2 > 40) Xe(pe - 1);
    else {
      var o3 = -(innerWidth + x) * ye.current;
      Math.abs(r3) > 100 && de && w2 && (i3 = true, Ye()), Z2({ touched: false, x: o3, lastCX: void 0, lastCY: void 0, bg: h2, overlay: !!i3 || se });
    }
  }
  P("keydown", function(e2) {
    if (z2) switch (e2.key) {
      case "ArrowLeft":
        Xe(pe - 1, true);
        break;
      case "ArrowRight":
        Xe(pe + 1, true);
        break;
      case "Escape":
        Ye();
    }
  });
  var Ve = function(e2, n2, t2) {
    return (0, import_react.useMemo)(function() {
      var r3 = e2.length;
      return t2 ? e2.concat(e2).concat(e2).slice(r3 + n2 - 1, r3 + n2 + 2) : e2.slice(Math.max(n2 - 1, 0), Math.min(n2 + 2, r3 + 1));
    }, [e2, n2, t2]);
  }(F2, pe, be);
  if (!ke) return null;
  var Re = se && !Pe, Ae = z2 ? ue : le, Ie = he && me && { images: F2, index: pe, visible: z2, onClose: Ye, onIndexChange: Xe, overlayVisible: Re, overlay: Ce && Ce.overlay, scale: ve, rotate: fe, onScale: he, onRotate: me }, He = c2 ? c2(Pe) : 400, Le = l2 ? l2(Pe) : y, Fe = c2 ? c2(3) : 600, De = l2 ? l2(3) : y;
  return import_react.default.createElement(M, { className: "PhotoView-Portal" + (Re ? "" : " PhotoView-Slider__clean") + (z2 ? "" : " PhotoView-Slider__willClose") + (V2 ? " " + V2 : ""), role: "dialog", onClick: function(e2) {
    return e2.stopPropagation();
  }, container: K2 }, z2 && import_react.default.createElement(W, null), import_react.default.createElement("div", { className: "PhotoView-Slider__Backdrop" + (R2 ? " " + R2 : "") + (1 === Pe ? " PhotoView-Slider__fadeIn" : 2 === Pe ? " PhotoView-Slider__fadeOut" : ""), style: { background: Ae ? "rgba(0, 0, 0, " + Ae + ")" : void 0, transitionTimingFunction: Le, transitionDuration: (re ? 0 : He) + "ms", animationDuration: He + "ms" }, onAnimationEnd: _e }), _2 && import_react.default.createElement("div", { className: "PhotoView-Slider__BannerWrap" }, import_react.default.createElement("div", { className: "PhotoView-Slider__Counter" }, pe + 1, " / ", xe), import_react.default.createElement("div", { className: "PhotoView-Slider__BannerRight" }, T2 && Ie && T2(Ie), import_react.default.createElement(Y, { className: "PhotoView-Slider__toolbarIcon", onClick: Ye }))), Ve.map(function(n2, t2) {
    var r3 = be || 0 !== pe ? ye.current - 1 + t2 : pe + t2;
    return import_react.default.createElement(U, { key: be ? n2.key + "/" + n2.src + "/" + r3 : n2.key, item: n2, speed: He, easing: Le, visible: z2, onReachMove: Se, onReachUp: Te, onPhotoTap: function() {
      return Ne(s2);
    }, onMaskTap: function() {
      return Ne(v2);
    }, wrapClassName: I2, className: A2, style: { left: (innerWidth + x) * r3 + "px", transform: "translate3d(" + te + "px, 0px, 0)", transition: re || ie ? void 0 : "transform " + Fe + "ms " + De }, loadingElement: H2, brokenElement: L2, onPhotoResize: We, isActive: ye.current === r3, expose: Z2 });
  }), !C && _2 && import_react.default.createElement(import_react.default.Fragment, null, (be || 0 !== pe) && import_react.default.createElement("div", { className: "PhotoView-Slider__ArrowLeft", onClick: function() {
    return Xe(pe - 1, true);
  } }, import_react.default.createElement(X, null)), (be || pe + 1 < xe) && import_react.default.createElement("div", { className: "PhotoView-Slider__ArrowRight", onClick: function() {
    return Xe(pe + 1, true);
  } }, import_react.default.createElement(N, null))), S2 && Ie && import_react.default.createElement("div", { className: "PhotoView-Slider__Overlay" }, S2(Ie)));
}
var Q = ["children", "onIndexChange", "onVisibleChange"];
var Z = { images: [], visible: false, index: 0 };
function $(t2) {
  var r2 = t2.children, i2 = t2.onIndexChange, o2 = t2.onVisibleChange, c2 = m(t2, Q), u2 = p(Z), l2 = u2[0], s2 = u2[1], d2 = (0, import_react.useRef)(0), v2 = l2.images, f2 = l2.visible, y2 = l2.index, x2 = g({ nextId: function() {
    return d2.current += 1;
  }, update: function(e2) {
    var n2 = v2.findIndex(function(n3) {
      return n3.key === e2.key;
    });
    if (n2 > -1) {
      var t3 = v2.slice();
      return t3.splice(n2, 1, e2), void s2({ images: t3 });
    }
    s2(function(n3) {
      return { images: n3.images.concat(e2) };
    });
  }, remove: function(e2) {
    s2(function(n2) {
      var t3 = n2.images.filter(function(n3) {
        return n3.key !== e2;
      });
      return { images: t3, index: Math.min(t3.length - 1, y2) };
    });
  }, show: function(e2) {
    var n2 = v2.findIndex(function(n3) {
      return n3.key === e2;
    });
    s2({ visible: true, index: n2 }), o2 && o2(true, n2, l2);
  } }), C2 = g({ close: function() {
    s2({ visible: false }), o2 && o2(false, y2, l2);
  }, changeIndex: function(e2) {
    s2({ index: e2 }), i2 && i2(e2, l2);
  } }), b2 = (0, import_react.useMemo)(function() {
    return h({}, l2, x2);
  }, [l2, x2]);
  return import_react.default.createElement(w.Provider, { value: b2 }, r2, import_react.default.createElement(J, h({ images: v2, visible: f2, index: y2, onIndexChange: C2.changeIndex, onClose: C2.close }, c2)));
}
var ee = function(e2) {
  var t2, r2, o2 = e2.src, c2 = e2.render, u2 = e2.overlay, f2 = e2.width, m2 = e2.height, p2 = e2.triggers, y2 = void 0 === p2 ? ["onClick"] : p2, x2 = e2.children, C2 = (0, import_react.useContext)(w), b2 = (t2 = function() {
    return C2.nextId();
  }, (r2 = (0, import_react.useRef)({ sign: false, fn: void 0 }).current).sign || (r2.sign = true, r2.fn = t2()), r2.fn), E2 = (0, import_react.useRef)(null);
  (0, import_react.useImperativeHandle)(null == x2 ? void 0 : x2.ref, function() {
    return E2.current;
  }), (0, import_react.useEffect)(function() {
    return function() {
      C2.remove(b2);
    };
  }, []);
  var k2 = g({ render: function(e3) {
    return c2 && c2(e3);
  }, show: function(e3, n2) {
    C2.show(b2), function(e4, n3) {
      if (x2) {
        var t3 = x2.props[e4];
        t3 && t3(n3);
      }
    }(e3, n2);
  } }), P2 = (0, import_react.useMemo)(function() {
    var e3 = {};
    return y2.forEach(function(n2) {
      e3[n2] = k2.show.bind(null, n2);
    }), e3;
  }, []);
  return (0, import_react.useEffect)(function() {
    C2.update({ key: b2, src: o2, originRef: E2, render: k2.render, overlay: u2, width: f2, height: m2 });
  }, [o2]), x2 ? import_react.Children.only((0, import_react.cloneElement)(x2, h({}, P2, { ref: E2 }))) : null;
};
export {
  $ as PhotoProvider,
  J as PhotoSlider,
  ee as PhotoView
};
//# sourceMappingURL=react-photo-view.js.map
